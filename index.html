<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Flashcard Studio</title>
  <link rel="stylesheet" href="assets/styles.css" />
</head>
<body>
  <main>
    <header>
      <div class="theme-toggle">
        <button type="button" class="secondary" id="themeToggle" aria-label="Toggle color theme">
          Switch to Light Theme
        </button>
      </div>
      <h1>Flashcard Studio</h1>
      <p class="subtitle">
        Build, import, and manage flashcard sets directly in your browser.
      </p>
    </header>

    <section id="accountSection" aria-live="polite">
      <div class="section-header">
        <h2>1. Create an account</h2>
        <p>Sign up or log in so your sets stay with you across browsers and devices.</p>
      </div>
      <div class="account-card">
        <div id="accountStatus" class="account-status" role="status"></div>
        <form id="signUpForm" class="account-form hidden">
          <div class="flex-row">
            <label>
              Email
              <input id="signUpEmail" type="email" autocomplete="email" placeholder="you@example.com" required />
            </label>
            <label>
              Password
              <input id="signUpPassword" type="password" autocomplete="new-password" placeholder="At least 8 characters" minlength="8" required />
            </label>
          </div>
          <button type="submit">Create account</button>
        </form>
        <form id="logInForm" class="account-form">
          <div class="flex-row">
            <label>
              Email
              <input id="logInEmail" type="email" autocomplete="email" placeholder="you@example.com" required />
            </label>
            <label>
              Password
              <input id="logInPassword" type="password" autocomplete="current-password" placeholder="Your password" required />
            </label>
          </div>
          <button type="submit">Log in</button>
        </form>
        <div class="account-actions">
          <button id="showSignUp" type="button">Create an account</button>
          <button id="showLogIn" type="button" class="hidden">I already have an account</button>
          <button id="logoutButton" type="button" class="secondary hidden">Log out</button>
        </div>
      </div>
    </section>

    <section id="instructions">
      <div class="section-header">
        <h2>2. Get started</h2>
        <p>Use the set manager below to create cards from scratch or import existing CSV decks. Sets are tied to your account.</p>
      </div>
      <ul>
        <li>Create a set with the visual creator, customise the fields you need, and add cards one by one.</li>
        <li>Import CSV files to instantly turn spreadsheets into study-ready decks.</li>
        <li>Edit sets at any time and switch between them instantly during study sessions.</li>
        <li>Keyboard shortcuts during study: <strong>1</strong> reveals an answer or marks it as known, <strong>2</strong> marks "I don't know it".</li>
      </ul>
    </section>

    <section id="setManager">
      <div class="section-header">
        <h2>3. Manage your sets</h2>
        <p>Build sets with the creator, import CSV decks, share links, or edit the ones you've already made.</p>
      </div>
      <div class="set-controls">
        <button id="createSetButton">Create a set</button>
        <button id="importSetButton" class="secondary">Import from CSV</button>
        <button id="downloadExample" class="secondary download-example">Download example CSV</button>
        <input id="importSetInput" type="file" class="hidden" accept=".csv,text/csv" />
      </div>
      <div id="setsList" class="sets-list"></div>
    </section>

    <section id="setEditor" class="hidden" aria-live="polite">
      <div class="section-header">
        <h2 id="setEditorTitle">Create a set</h2>
        <p>Use the creator to define the fields you want and craft the flashcards for this set. Your work is saved locally.</p>
      </div>
      <div class="flex-row">
        <label>
          Set name
          <input id="setNameInput" type="text" placeholder="e.g. Biology Chapter 5" />
        </label>
      </div>
      <div class="column-editor">
        <h3>Fields</h3>
        <p class="subtitle" style="font-size: 0.95rem; text-align: left;">These are the columns you can reference in your templates.</p>
        <div id="columnList"></div>
        <div class="flex-row">
          <input id="newColumnInput" type="text" placeholder="Add a new field" />
          <button id="addColumnButton" type="button" class="secondary">Add field</button>
        </div>
      </div>
      <div class="templates-editor">
        <h3>Templates</h3>
        <p class="subtitle" style="font-size: 0.95rem; text-align: left;">Use <code>{{FieldName}}</code> to pull values from your cards. Front and back are required.</p>
        <div class="flex-row">
          <label>
            Front template
            <textarea id="templateFront" placeholder="e.g. {{Term}}"></textarea>
          </label>
          <label>
            Back template
            <textarea id="templateBack" placeholder="e.g. {{Definition}}"></textarea>
          </label>
        </div>
        <label>
          Optional hint template
          <textarea id="templateHint" placeholder="e.g. {{Hint}}"></textarea>
        </label>
      </div>
      <div class="cards-editor">
        <div class="study-header" style="margin-bottom: 1rem;">
          <h3 style="margin: 0;">Cards</h3>
          <button id="addCardButton" type="button" class="secondary">Add card</button>
        </div>
        <div class="cards-editor__table-wrapper">
          <table>
            <thead id="cardsTableHead"></thead>
            <tbody id="cardsTableBody"></tbody>
          </table>
        </div>
      </div>
      <div class="actions">
        <button id="saveSetButton" type="button">Save set</button>
        <button id="cancelSetButton" type="button" class="secondary">Cancel</button>
      </div>
    </section>

    <section id="study" class="hidden" aria-live="polite">
      <div class="study-header">
        <h2 id="studySetTitle">Study session</h2>
        <button id="backButton" class="secondary back-button" type="button">Back</button>
      </div>
      <div class="card" id="cardText"></div>
      <div class="card__hint" id="cardHint"></div>
      <div class="actions">
        <button id="showAnswer" type="button">1. Show answer</button>
        <button id="knowButton" type="button" class="hidden">1. I know it</button>
        <button id="dontKnowButton" type="button" class="hidden secondary">2. I don't know it</button>
      </div>
      <div class="progress-meter">
        <div class="progress-meter__label" id="progressText">learned this round: 0/0</div>
        <div class="progress-meter__track">
          <div class="progress-meter__fill" id="progressFill"></div>
        </div>
      </div>
      <div class="actions">
        <button id="restartButton" type="button" class="hidden secondary">1. Study again</button>
        <button id="returnButton" type="button" class="hidden secondary back-button">2. Back</button>
      </div>
    </section>

  </main>

  <div id="confettiContainer" class="confetti-container" aria-hidden="true"></div>
  <div class="version-badge" aria-label="Version">v1.3.0</div>

  <script src="assets/app.js" defer></script>
</body>
</html>
