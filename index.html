<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Flashcard Studio</title>
  <link rel="stylesheet" href="assets/styles.css" />
</head>
<body>
  <header class="site-header" role="banner">
    <div class="site-header__inner">
      <div class="site-brand" id="brandLink" role="button" tabindex="0">
        <span class="site-brand__logo" aria-hidden="true">‚ö°</span>
        <div class="site-brand__text">
          <span class="site-brand__name">Flashcard Studio</span>
          <span class="site-brand__tagline">Study beautifully</span>
        </div>
      </div>
      <div class="site-header__actions">
        <div class="account-chip" id="topAccountStatus" data-state="guest" role="status">You are browsing as a guest</div>
        <div class="site-header__buttons">
          <button id="topSignUpButton" type="button" class="button button--ghost">Sign up</button>
          <button id="topLogInButton" type="button" class="button button--ghost">Log in</button>
          <button id="topSettingsButton" type="button" class="button button--ghost hidden" aria-label="Open settings">
            <span class="button__icon" aria-hidden="true">‚öôÔ∏è</span>
            <span class="button__label">Settings</span>
          </button>
          <button id="topLogoutButton" type="button" class="button button--ghost hidden">
            <span class="button__icon" aria-hidden="true">‚á¶</span>
            <span class="button__label">Log out</span>
          </button>
        </div>
      </div>
    </div>
  </header>

  <!-- Home Page -->
  <div id="homePage" class="page">
    <main class="landing">
      <section class="hero">
        <div class="hero__content">
          <span class="hero__eyebrow">Flashcards, reinvented</span>
          <h1>Design beautiful study sessions in minutes.</h1>
          <p class="hero__subtitle">
            Flashcard Studio gives you a cohesive workspace to build, organize, and revise your decks. Your progress follows you on every device.
          </p>
          <div class="hero__actions">
            <button type="button" id="heroGetStarted" class="button button--primary">Start creating</button>
            <button type="button" id="topLogInButtonHero" class="button button--secondary">I already have an account</button>
          </div>
          <ul class="hero__highlights" aria-label="Highlights">
            <li>Drag-friendly card editor</li>
            <li>Lightning-fast CSV importer</li>
            <li>Smart spaced review sessions</li>
          </ul>
        </div>
        <div class="hero__preview" aria-hidden="true">
          <div class="hero-preview-card">
            <div class="hero-preview-card__badge">Live preview</div>
            <div class="hero-preview-card__body">
              <div class="hero-preview-card__title">Biology: Plant Cells</div>
              <p class="hero-preview-card__text">What is the function of the chloroplast?</p>
              <div class="hero-preview-card__footer">
                <span class="hero-preview-card__pill">Keyboard shortcuts ready</span>
                <span class="hero-preview-card__pill">Cloud synced</span>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section class="feature-section">
        <div class="section-heading">
          <h2>Everything you need for confident studying</h2>
          <p>Streamlined tools, polished interfaces, and accessible controls that make mastering material feel effortless.</p>
        </div>
        <div class="feature-grid">
          <article class="feature-tile">
            <div class="feature-tile__icon" aria-hidden="true">üé®</div>
            <h3>Unified creator</h3>
            <p>Craft cards, templates, and hints in one cohesive panel. Preview updates instantly before you save.</p>
          </article>
          <article class="feature-tile">
            <div class="feature-tile__icon" aria-hidden="true">üì•</div>
            <h3>Seamless import</h3>
            <p>Upload CSV files or copy spreadsheets to build complete sets with automatic column detection.</p>
          </article>
          <article class="feature-tile">
            <div class="feature-tile__icon" aria-hidden="true">üß†</div>
            <h3>Guided review</h3>
            <p>Stay in the zone with focused study modes, hints on demand, and quick keyboard shortcuts.</p>
          </article>
          <article class="feature-tile">
            <div class="feature-tile__icon" aria-hidden="true">‚òÅÔ∏è</div>
            <h3>Automatic sync</h3>
            <p>Your work stays safe in the cloud‚Äîsign in anywhere and continue exactly where you left off.</p>
          </article>
          <article class="feature-tile">
            <div class="feature-tile__icon" aria-hidden="true">üì§</div>
            <h3>Quick exports</h3>
            <p>Download your data with one click to share with classmates or archive your progress.</p>
          </article>
          <article class="feature-tile">
            <div class="feature-tile__icon" aria-hidden="true">üéØ</div>
            <h3>Focus dashboards</h3>
            <p>Track card counts, templates, and completion in a structured workspace designed for clarity.</p>
          </article>
        </div>
      </section>

      <section class="cta-section" aria-labelledby="ctaHeading">
        <div class="cta-card">
          <div>
            <h2 id="ctaHeading">Ready to upgrade your study flow?</h2>
            <p>Join Flashcard Studio to create smarter decks, stay organized, and feel confident walking into every exam.</p>
          </div>
          <button type="button" id="ctaGetStarted" class="button button--primary">Create a free account</button>
        </div>
      </section>
    </main>
  </div>

  <!-- Login Page -->
  <div id="loginPage" class="page hidden">
    <main class="auth-layout">
      <section class="auth-card">
        <h1>Welcome back</h1>
        <p class="auth-card__subtitle">Log in to access your synced flashcard studio.</p>

        <div id="loginStatus" class="account-status hidden" role="status"></div>

        <form id="logInForm" class="auth-form">
          <label class="form-field">
            <span class="form-field__label">Email</span>
            <input id="logInEmail" type="email" autocomplete="email" placeholder="you@example.com" required />
          </label>
          <label class="form-field">
            <span class="form-field__label">Password</span>
            <input id="logInPassword" type="password" autocomplete="current-password" placeholder="Your password" required />
          </label>
          <button type="submit" class="button button--primary button--full">Log in</button>
        </form>

        <p class="auth-card__switch">Don't have an account?
          <button id="switchToSignUp" type="button" class="link-button">Create one</button>
        </p>
      </section>
    </main>
  </div>

  <!-- Sign Up Page -->
  <div id="signupPage" class="page hidden">
    <main class="auth-layout">
      <section class="auth-card">
        <h1>Create your account</h1>
        <p class="auth-card__subtitle">Design rich flashcards, study with focus, and sync instantly.</p>

        <div id="signupStatus" class="account-status hidden" role="status"></div>

        <form id="signUpForm" class="auth-form">
          <label class="form-field">
            <span class="form-field__label">Email</span>
            <input id="signUpEmail" type="email" autocomplete="email" placeholder="you@example.com" required />
          </label>
          <label class="form-field">
            <span class="form-field__label required">Password</span>
            <input id="signUpPassword" type="password" autocomplete="new-password" placeholder="At least 8 characters" minlength="8" required />
          </label>
          <button type="submit" class="button button--primary button--full">Create account</button>
        </form>

        <p class="auth-card__switch">Already have an account?
          <button id="switchToLogIn" type="button" class="link-button">Log in</button>
        </p>
      </section>
    </main>
  </div>

  <!-- App Page (Sets Manager) -->
  <div id="appPage" class="page hidden">
    <main class="workspace" aria-live="polite">
      <section id="setManager" class="workspace__panel">
        <header class="panel-header">
          <div>
            <h2>Your flashcard hub</h2>
            <p class="panel-header__subtitle">Create, import, and study your decks from one organized place.</p>
          </div>
          <div class="panel-header__actions">
            <button id="createSetButton" class="button button--primary">Create a set</button>
            <button id="importSetButton" class="button button--secondary">Import CSV</button>
            <button id="downloadExample" class="button button--ghost">Download example</button>
            <input id="importSetInput" type="file" class="hidden" accept=".csv,text/csv" />
          </div>
        </header>
        <div id="setsList" class="sets-list"></div>
      </section>

      <section id="setEditor" class="workspace__panel hidden" aria-live="polite">
        <header class="panel-header">
          <div>
            <h2 id="setEditorTitle">Create a set</h2>
            <p class="panel-header__subtitle">Define your fields, build templates, and organize cards. Changes save to your account.</p>
          </div>
          <button id="cancelSetButton" type="button" class="button button--ghost">Close editor</button>
        </header>

        <div class="panel-group">
          <div class="panel-card">
            <h3 class="panel-card__title">Set details</h3>
            <label class="form-field">
              <span class="form-field__label required">Set name</span>
              <input id="setNameInput" type="text" placeholder="e.g. Biology Chapter 5" />
            </label>
          </div>

          <div class="panel-card">
            <div class="panel-card__header">
              <div>
                <h3 class="panel-card__title">Fields</h3>
                <p class="panel-card__subtitle">Columns become variables inside your templates.</p>
              </div>
              <div class="panel-card__toolbar">
                <input id="newColumnInput" type="text" placeholder="Add a new field" />
                <button id="addColumnButton" type="button" class="button button--secondary">Add field</button>
              </div>
            </div>
            <div id="columnList" class="column-list"></div>
          </div>

          <div class="panel-card">
            <h3 class="panel-card__title">Templates</h3>
            <p class="panel-card__subtitle">Use <code>{{FieldName}}</code> to reference the values from each card.</p>
            <div class="template-grid">
              <label class="form-field">
                <span class="form-field__label required">Front template</span>
                <textarea id="templateFront" placeholder="e.g. {{Term}}"></textarea>
              </label>
              <label class="form-field">
                <span class="form-field__label required">Back template</span>
                <textarea id="templateBack" placeholder="e.g. {{Definition}}"></textarea>
              </label>
            </div>
            <label class="form-field">
              <span class="form-field__label">Optional hint template</span>
              <textarea id="templateHint" placeholder="e.g. {{Hint}}"></textarea>
            </label>
          </div>

          <div class="panel-card">
            <div class="panel-card__header">
              <h3 class="panel-card__title">Cards</h3>
              <button id="addCardButton" type="button" class="button button--secondary">Add card</button>
            </div>
            <div class="table-wrapper">
              <table>
                <thead id="cardsTableHead"></thead>
                <tbody id="cardsTableBody"></tbody>
              </table>
            </div>
          </div>
        </div>

        <footer class="panel-footer">
          <button id="saveSetButton" type="button" class="button button--primary">Save set</button>
          <button id="cancelSetButtonFooter" type="button" class="button button--ghost">Cancel</button>
        </footer>
      </section>

      <section id="study" class="workspace__panel hidden" aria-live="polite">
        <header class="panel-header">
          <div>
            <h2 id="studySetTitle">Study session</h2>
            <p class="panel-header__subtitle">Reveal answers, track progress, and celebrate wins.</p>
          </div>
          <button id="backButton" class="button button--ghost back-button" type="button">Back to sets</button>
        </header>
        <div class="study-card" id="cardText"></div>
        <div class="study-hint" id="cardHint"></div>
        <div class="panel-footer panel-footer--stacked">
          <div class="action-row" id="studyPrimaryActions">
            <button id="showAnswer" type="button" class="button button--primary">1. Show answer</button>
            <button id="knowButton" type="button" class="button button--primary hidden">1. I know it</button>
            <button id="dontKnowButton" type="button" class="button button--secondary hidden">2. I don't know it</button>
          </div>
          <div class="progress-meter">
            <div class="progress-meter__label" id="progressText">learned this round: 0/0</div>
            <div class="progress-meter__track">
              <div class="progress-meter__fill" id="progressFill"></div>
            </div>
          </div>
          <div class="action-row">
            <button id="restartButton" type="button" class="button button--secondary hidden">1. Study again</button>
            <button id="returnButton" type="button" class="button button--ghost hidden back-button">2. Back</button>
          </div>
        </div>
      </section>
    </main>
  </div>

  <!-- Settings Page -->
  <div id="settingsPage" class="page hidden">
    <main class="settings-layout">
      <section id="settingsSection" class="settings-panel">
        <header class="panel-header">
          <div>
            <h2>Workspace settings</h2>
            <p class="panel-header__subtitle">Tune Flashcard Studio to match your preferences.</p>
          </div>
          <button id="backToAppButton" type="button" class="button button--ghost back-button">Back to sets</button>
        </header>

        <div id="settingsStatus" class="account-status hidden" role="status"></div>

        <div class="settings-group">
          <article class="settings-card">
            <div class="settings-card__header">
              <div>
                <h3 class="settings-card__title">Appearance</h3>
                <p class="settings-card__subtitle">Choose the theme that feels right for your eyes.</p>
              </div>
              <button id="themeToggle" type="button" class="button button--secondary">
                <span class="theme-toggle__icon" aria-hidden="true">üåô</span>
                <span class="theme-toggle__label">Dark mode</span>
              </button>
            </div>
          </article>

          <article class="settings-card">
            <div class="settings-card__header">
              <div>
                <h3 class="settings-card__title">Account security</h3>
                <p class="settings-card__subtitle">Update your password to keep your account protected.</p>
              </div>
            </div>
            <form id="changePasswordForm" class="settings-form">
              <label class="form-field">
                <span class="form-field__label required">Current password</span>
                <input id="currentPassword" type="password" autocomplete="current-password" placeholder="Your current password" required />
              </label>
              <label class="form-field">
                <span class="form-field__label required">New password</span>
                <input id="newPassword" type="password" autocomplete="new-password" placeholder="At least 8 characters" minlength="8" required />
              </label>
              <label class="form-field">
                <span class="form-field__label required">Confirm new password</span>
                <input id="confirmPassword" type="password" autocomplete="new-password" placeholder="Re-enter new password" minlength="8" required />
              </label>
              <button type="submit" class="button button--primary">Change password</button>
            </form>
          </article>
        </div>
      </section>
    </main>
  </div>

  <div id="confettiContainer" class="confetti-container" aria-hidden="true"></div>
  <div class="version-badge" aria-label="Version">v1.7.0</div>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.45.4/dist/umd/supabase.min.js" integrity="sha384-GFr3yTh5lJznCbZfpTtXnwboFsxqtTQoeTZCRHhE0579KrRmlCzen5AA8ohaB5ug" crossorigin="anonymous" defer></script>
  <script src="assets/app.js" defer></script>
</body>
</html>
